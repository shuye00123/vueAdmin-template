{"version":3,"sources":["webpack:///static/js/2.4c4357f7be59c35eff7f.js","webpack:///./src/views/page/recharge.vue?ead3","webpack:///./src/views/page/recharge.vue?5bf0","webpack:///./src/utils/validate.js?1382","webpack:///./src/views/page/recharge.vue?3ffa","webpack:///src/views/page/recharge.vue","webpack:///./src/views/page/recharge.vue"],"names":["webpackJsonp","+wmR","module","exports","__webpack_require__","content","i","locals","Az6o","__webpack_exports__","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","gutter","xs","sm","md","lg","push","ref","model","form","label","prop","filterable","allow-create","placeholder","value","callback","$$v","price","expression","_l","item","key","_v","type","on","click","onSubmit","title","visible","dialogVisible","size","before-close","handleClose","update:visible","$event","src","imgurl","slot","staticRenderFns","esExports","E4LH","isvalidUsername","str","test","isValidPlate","validateNumber","Grs1","version","sources","names","mappings","file","sourcesContent","sourceRoot","ULZw","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default","n","__WEBPACK_IMPORTED_MODULE_1__utils_validate__","__WEBPACK_IMPORTED_MODULE_2_vuex__","computed","data","prices","rechargeRules","required","trigger","validator","rule","Error","methods","done","$confirm","then","_","catch","_this","$refs","validate","valid","console","log","$store","dispatch","source","response","pay","onBridgeReady","dt","appId","timeStamp","nonceStr","datapackage","signType","paySign","WeixinJSBridge","invoke","package","res","err_msg","alert","document","addEventListener","attachEvent","jaj3","injectStyle","ssrContext","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_0_4_vue_loader_lib_selector_type_script_index_0_recharge_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_0_4_vue_loader_lib_template_compiler_index_id_data_v_55fed368_hasScoped_false_node_modules_vue_loader_13_0_4_vue_loader_lib_selector_type_template_index_0_recharge_vue__","normalizeComponent","__vue_styles__","Component"],"mappings":"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","file":"static/js/2.4c4357f7be59c35eff7f.js","sourcesContent":["webpackJsonp([2],{\n\n/***/ \"+wmR\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(\"Grs1\");\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(\"XkoO\")(\"14970f9b\", content, true);\n\n/***/ }),\n\n/***/ \"Az6o\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"app-container\"\n  }, [_c('el-row', {\n    attrs: {\n      \"gutter\": 10\n    }\n  }, [_c('el-col', {\n    attrs: {\n      \"xs\": 22,\n      \"sm\": 22,\n      \"md\": 22,\n      \"lg\": 4,\n      \"push\": 1\n    }\n  }, [_c('el-card', {\n    staticClass: \"box-card\"\n  }, [_c('el-form', {\n    ref: \"form\",\n    attrs: {\n      \"model\": _vm.form\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"充值金额（元）\",\n      \"prop\": \"merRuleid\"\n    }\n  }, [_c('el-select', {\n    attrs: {\n      \"filterable\": \"\",\n      \"allow-create\": \"\",\n      \"placeholder\": \"请选择充值金额\"\n    },\n    model: {\n      value: (_vm.form.price),\n      callback: function($$v) {\n        _vm.form.price = $$v\n      },\n      expression: \"form.price\"\n    }\n  }, _vm._l((_vm.prices), function(item) {\n    return _c('el-option', {\n      key: item,\n      attrs: {\n        \"label\": item,\n        \"value\": item\n      }\n    })\n  }))], 1), _vm._v(\" \"), _c('el-form-item', [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.onSubmit\n    }\n  }, [_vm._v(\"充值\")]), _vm._v(\" \"), _c('el-button', [_vm._v(\"取消\")])], 1)], 1)], 1)], 1)], 1), _vm._v(\" \"), _c('el-dialog', {\n    attrs: {\n      \"title\": \"微信扫码支付\",\n      \"visible\": _vm.dialogVisible,\n      \"size\": \"tiny\",\n      \"before-close\": _vm.handleClose\n    },\n    on: {\n      \"update:visible\": function($event) {\n        _vm.dialogVisible = $event\n      }\n    }\n  }, [_c('img', {\n    attrs: {\n      \"src\": _vm.imgurl\n    }\n  }), _vm._v(\" \"), _c('span', {\n    staticClass: \"dialog-footer\",\n    slot: \"footer\"\n  }, [_c('el-button', {\n    on: {\n      \"click\": function($event) {\n        _vm.dialogVisible = false\n      }\n    }\n  }, [_vm._v(\"取 消\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.dialogVisible = false\n      }\n    }\n  }, [_vm._v(\"确 定\")])], 1)])], 1)\n}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"E4LH\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = isvalidUsername;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = isValidPlate;\n/* unused harmony export validateURL */\n/* unused harmony export validateLowerCase */\n/* unused harmony export validateUpperCase */\n/* unused harmony export validateAlphabets */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = validateNumber;\n/**\r\n * Created by jiachenpan on 16/11/18.\r\n */\n\nfunction isvalidUsername(str) {\n  var userReg = /^[0-9A-Za-z\\u4e00-\\u9fa5]+$/;\n  return userReg.test(str);\n}\n/* 合法车牌*/\nfunction isValidPlate(str) {\n  var plateReg = /^[\\u4e00-\\u9fa5]{1}[a-zA-Z]{1}[a-zA-Z_0-9]{5}$/;\n  return plateReg.test(str);\n}\n\n/* 合法uri*/\nfunction validateURL(textval) {\n  var urlregex = /^(https?|ftp):\\/\\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\\.)*[a-zA-Z0-9-]+\\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\\/($|[a-zA-Z0-9.,?'\\\\+&%$#=~_-]+))*$/;\n  return urlregex.test(textval);\n}\n\n/* 小写字母*/\nfunction validateLowerCase(str) {\n  var reg = /^[a-z]+$/;\n  return reg.test(str);\n}\n\n/* 大写字母*/\nfunction validateUpperCase(str) {\n  var reg = /^[A-Z]+$/;\n  return reg.test(str);\n}\n\n/* 大小写字母*/\nfunction validateAlphabets(str) {\n  var reg = /^[A-Za-z]+$/;\n  return reg.test(str);\n}\n\n/* 数字*/\nfunction validateNumber(str) {\n  var reg = /^[0-9]+$/;\n  return reg.test(str);\n}\n\n/***/ }),\n\n/***/ \"Grs1\":\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(\"acE3\")(true);\n// imports\n\n\n// module\nexports.push([module.i, \".el-dialog{text-align:center}\", \"\", {\"version\":3,\"sources\":[\"C:/Users/Administrator/WebstormProjects/vueAdmin-template/src/views/page/recharge.vue\"],\"names\":[],\"mappings\":\"AACA,WACE,iBAAkB,CACnB\",\"file\":\"recharge.vue\",\"sourcesContent\":[\"\\n.el-dialog{\\n  text-align: center\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"ULZw\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(\"4YfN\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_validate__ = __webpack_require__(\"E4LH\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_vuex__ = __webpack_require__(\"lQSI\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_vuex__[\"b\" /* mapGetters */])(['source'])),\n  data: function data() {\n    var validate = function validate(rule, value, callback) {\n      if (!__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_validate__[\"a\" /* validateNumber */])(value)) {\n        callback(new Error('请输入正确的金额'));\n      } else {\n        callback();\n      }\n    };\n    return {\n      imgurl: '123',\n      dialogVisible: false,\n      prices: [100, 200, 500, 1000],\n      form: {\n        price: 100\n      },\n      rechargeRules: {\n        price: [{ required: true, trigger: 'blur', validator: validate }]\n      }\n    };\n  },\n\n  methods: {\n    handleClose: function handleClose(done) {\n      this.$confirm('确认关闭？').then(function (_) {\n        done();\n      }).catch(function (_) {});\n    },\n    onSubmit: function onSubmit() {\n      var _this = this;\n\n      this.$refs.form.validate(function (valid) {\n        if (valid) {\n          _this.$store.dispatch('AddRecharge', _this.form.price).then(function () {\n            _this.$store.dispatch('PrePay', _this.source).then(function (response) {\n              if (_this.source === 2) {\n                _this.imgurl = 'http://qr.topscan.com/api.php?text=' + response.data;\n                _this.dialogVisible = true;\n              } else {\n                _this.pay(response.data);\n              }\n            }).catch(function () {});\n          }).catch(function () {});\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    pay: function pay(data) {\n      if (typeof WeixinJSBridge == \"undefined\") {\n        if (document.addEventListener) {\n          document.addEventListener('WeixinJSBridgeReady', onBridgeReady, false);\n        } else if (document.attachEvent) {\n          document.attachEvent('WeixinJSBridgeReady', onBridgeReady);\n          document.attachEvent('onWeixinJSBridgeReady', onBridgeReady);\n        }\n        console.log(\"初始化失败\");\n      } else {\n        onBridgeReady(data);\n        console.log(\"初始化成功\");\n      }\n\n      function onBridgeReady(data) {\n        var dt = data;\n        var appId = dt.appId;\n        var timeStamp = dt.timeStamp;\n        var nonceStr = dt.nonceStr;\n        var datapackage = dt.datapackage;\n        var signType = dt.signType;\n        var paySign = dt.paySign;\n        WeixinJSBridge.invoke('getBrandWCPayRequest', {\n          \"appId\": appId,\n          \"timeStamp\": timeStamp,\n          \"nonceStr\": nonceStr,\n          \"package\": datapackage,\n          \"signType\": signType,\n          \"paySign\": paySign\n        }, function (res) {\n          if (res.err_msg == \"get_brand_wcpay_request:ok\") {\n            alert('充值成功');\n            //gotoSuccessPage();\n            //wx.closeWindow();\n          } else if (res.err_msg == \"get_brand_wcpay_request:cancel\") {\n            console.log(\"用户取消支付!\");\n          } else {\n            console.log(\"支付失败!\");\n          }\n        });\n      }\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"jaj3\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_0_4_vue_loader_lib_selector_type_script_index_0_recharge_vue__ = __webpack_require__(\"ULZw\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_0_4_vue_loader_lib_template_compiler_index_id_data_v_55fed368_hasScoped_false_node_modules_vue_loader_13_0_4_vue_loader_lib_selector_type_template_index_0_recharge_vue__ = __webpack_require__(\"Az6o\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"+wmR\")\n}\nvar normalizeComponent = __webpack_require__(\"J0+h\")\n/* script */\n\n/* template */\n\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_0_4_vue_loader_lib_selector_type_script_index_0_recharge_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_0_4_vue_loader_lib_template_compiler_index_id_data_v_55fed368_hasScoped_false_node_modules_vue_loader_13_0_4_vue_loader_lib_selector_type_template_index_0_recharge_vue__[\"a\" /* default */],\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/2.4c4357f7be59c35eff7f.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/_css-loader@0.28.0@css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.0.4@vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-55fed368\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.0.4@vue-loader/lib/selector.js?type=styles&index=0!./recharge.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/_vue-style-loader@3.0.1@vue-style-loader/lib/addStylesClient.js\")(\"14970f9b\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_extract-text-webpack-plugin@2.0.0@extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/_vue-style-loader@3.0.1@vue-style-loader!./~/_css-loader@0.28.0@css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/_vue-loader@13.0.4@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-55fed368\",\"scoped\":false,\"hasInlineConfig\":false}!./~/_vue-loader@13.0.4@vue-loader/lib/selector.js?type=styles&index=0!./src/views/page/recharge.vue\n// module id = +wmR\n// module chunks = 2","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"app-container\"\n  }, [_c('el-row', {\n    attrs: {\n      \"gutter\": 10\n    }\n  }, [_c('el-col', {\n    attrs: {\n      \"xs\": 22,\n      \"sm\": 22,\n      \"md\": 22,\n      \"lg\": 4,\n      \"push\": 1\n    }\n  }, [_c('el-card', {\n    staticClass: \"box-card\"\n  }, [_c('el-form', {\n    ref: \"form\",\n    attrs: {\n      \"model\": _vm.form\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"充值金额（元）\",\n      \"prop\": \"merRuleid\"\n    }\n  }, [_c('el-select', {\n    attrs: {\n      \"filterable\": \"\",\n      \"allow-create\": \"\",\n      \"placeholder\": \"请选择充值金额\"\n    },\n    model: {\n      value: (_vm.form.price),\n      callback: function($$v) {\n        _vm.form.price = $$v\n      },\n      expression: \"form.price\"\n    }\n  }, _vm._l((_vm.prices), function(item) {\n    return _c('el-option', {\n      key: item,\n      attrs: {\n        \"label\": item,\n        \"value\": item\n      }\n    })\n  }))], 1), _vm._v(\" \"), _c('el-form-item', [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.onSubmit\n    }\n  }, [_vm._v(\"充值\")]), _vm._v(\" \"), _c('el-button', [_vm._v(\"取消\")])], 1)], 1)], 1)], 1)], 1), _vm._v(\" \"), _c('el-dialog', {\n    attrs: {\n      \"title\": \"微信扫码支付\",\n      \"visible\": _vm.dialogVisible,\n      \"size\": \"tiny\",\n      \"before-close\": _vm.handleClose\n    },\n    on: {\n      \"update:visible\": function($event) {\n        _vm.dialogVisible = $event\n      }\n    }\n  }, [_c('img', {\n    attrs: {\n      \"src\": _vm.imgurl\n    }\n  }), _vm._v(\" \"), _c('span', {\n    staticClass: \"dialog-footer\",\n    slot: \"footer\"\n  }, [_c('el-button', {\n    on: {\n      \"click\": function($event) {\n        _vm.dialogVisible = false\n      }\n    }\n  }, [_vm._v(\"取 消\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.dialogVisible = false\n      }\n    }\n  }, [_vm._v(\"确 定\")])], 1)])], 1)\n}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@13.0.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-55fed368\",\"hasScoped\":false}!./~/_vue-loader@13.0.4@vue-loader/lib/selector.js?type=template&index=0!./src/views/page/recharge.vue\n// module id = Az6o\n// module chunks = 2","/**\r\n * Created by jiachenpan on 16/11/18.\r\n */\r\n\r\nexport function isvalidUsername(str) {\r\n  const userReg = /^[0-9A-Za-z\\u4e00-\\u9fa5]+$/\r\n  return userReg.test(str)\r\n}\r\n/* 合法车牌*/\r\nexport function isValidPlate(str) {\r\n  const plateReg = /^[\\u4e00-\\u9fa5]{1}[a-zA-Z]{1}[a-zA-Z_0-9]{5}$/\r\n  return plateReg.test(str)\r\n}\r\n\r\n/* 合法uri*/\r\nexport function validateURL(textval) {\r\n  const urlregex = /^(https?|ftp):\\/\\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\\.)*[a-zA-Z0-9-]+\\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\\/($|[a-zA-Z0-9.,?'\\\\+&%$#=~_-]+))*$/\r\n  return urlregex.test(textval)\r\n}\r\n\r\n/* 小写字母*/\r\nexport function validateLowerCase(str) {\r\n  const reg = /^[a-z]+$/\r\n  return reg.test(str)\r\n}\r\n\r\n/* 大写字母*/\r\nexport function validateUpperCase(str) {\r\n  const reg = /^[A-Z]+$/\r\n  return reg.test(str)\r\n}\r\n\r\n/* 大小写字母*/\r\nexport function validateAlphabets(str) {\r\n  const reg = /^[A-Za-z]+$/\r\n  return reg.test(str)\r\n}\r\n\r\n/* 数字*/\r\nexport function validateNumber(str) {\r\n  const reg = /^[0-9]+$/\r\n  return reg.test(str)\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/validate.js","exports = module.exports = require(\"../../../node_modules/_css-loader@0.28.0@css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".el-dialog{text-align:center}\", \"\", {\"version\":3,\"sources\":[\"C:/Users/Administrator/WebstormProjects/vueAdmin-template/src/views/page/recharge.vue\"],\"names\":[],\"mappings\":\"AACA,WACE,iBAAkB,CACnB\",\"file\":\"recharge.vue\",\"sourcesContent\":[\"\\n.el-dialog{\\n  text-align: center\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_css-loader@0.28.0@css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/_vue-loader@13.0.4@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-55fed368\",\"scoped\":false,\"hasInlineConfig\":false}!./~/_vue-loader@13.0.4@vue-loader/lib/selector.js?type=styles&index=0!./src/views/page/recharge.vue\n// module id = Grs1\n// module chunks = 2","<template>\r\n  <div class=\"app-container\">\r\n    <el-row :gutter=\"10\">\r\n      <el-col :xs=\"22\" :sm=\"22\" :md=\"22\" :lg=\"4\" :push=\"1\">\r\n        <el-card class=\"box-card\">\r\n          <el-form ref=\"form\" :model=\"form\">\r\n            <el-form-item label=\"充值金额（元）\" prop=\"merRuleid\">\r\n              <el-select v-model=\"form.price\" filterable=\"\" allow-create placeholder=\"请选择充值金额\">\r\n                <el-option v-for=\"item in prices\" :key=\"item\" :label=\"item\" :value=\"item\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button type=\"primary\" @click=\"onSubmit\">充值</el-button>\r\n              <el-button>取消</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n    <el-dialog title=\"微信扫码支付\" :visible.sync=\"dialogVisible\" size=\"tiny\" :before-close=\"handleClose\">\r\n      <img :src=imgurl></img>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"dialogVisible = false\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { validateNumber } from '@/utils/validate'\r\nimport { mapGetters } from 'vuex'\r\nexport default {\r\n  computed: {\r\n    ...mapGetters([\r\n      'source',\r\n    ])\r\n  },\r\n  data() {\r\n    const validate = (rule, value, callback) => {\r\n    if (!validateNumber(value)) {\r\n        callback(new Error('请输入正确的金额'))\r\n      } else {\r\n        callback()\r\n      }\r\n    }\r\n    return {\r\n      imgurl: '123',\r\n      dialogVisible: false,\r\n      prices: [100,200,500,1000],\r\n      form: {\r\n        price:100\r\n      },\r\n      rechargeRules: {\r\n        price: [{ required: true, trigger: 'blur', validator: validate }]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    handleClose(done) {\r\n      this.$confirm('确认关闭？')\r\n          .then(_ => {\r\n            done();\r\n          })\r\n          .catch(_ => {});\r\n    },\r\n    onSubmit() {\r\n      this.$refs.form.validate(valid => {\r\n        if (valid) {\r\n          this.$store.dispatch('AddRecharge', this.form.price).then(() => {\r\n            this.$store.dispatch('PrePay', this.source).then((response) => {\r\n              if(this.source === 2) {\r\n                this.imgurl = 'http://qr.topscan.com/api.php?text=' + response.data\r\n                this.dialogVisible = true\r\n              }else{\r\n                this.pay(response.data)\r\n              }\r\n            }).catch(() => {})\r\n          }).catch(() => {})\r\n        } else {\r\n          console.log('error submit!!')\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    pay(data) {\r\n      if(typeof(WeixinJSBridge) == \"undefined\") {\r\n\t\t\t\tif(document.addEventListener) {\r\n\t\t\t\t\tdocument.addEventListener('WeixinJSBridgeReady', onBridgeReady, false);\r\n\t\t\t\t} else if(document.attachEvent) {\r\n\t\t\t\t\tdocument.attachEvent('WeixinJSBridgeReady', onBridgeReady);\r\n\t\t\t\t\tdocument.attachEvent('onWeixinJSBridgeReady', onBridgeReady);\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(\"初始化失败\");\r\n\t\t\t} else {\r\n\t\t\t\tonBridgeReady(data);\r\n\t\t\t\tconsole.log(\"初始化成功\");\r\n\t\t\t}\r\n\r\n\t\t\tfunction onBridgeReady(data) {\r\n\t\t\t\tvar dt = data;\r\n\t\t\t\tvar appId = dt.appId;\r\n\t\t\t\tvar timeStamp = dt.timeStamp;\r\n\t\t\t\tvar nonceStr = dt.nonceStr;\r\n\t\t\t\tvar datapackage = dt.datapackage;\r\n\t\t\t\tvar signType = dt.signType;\r\n\t\t\t\tvar paySign = dt.paySign;\r\n\t\t\t\tWeixinJSBridge.invoke(\r\n\t\t\t\t\t'getBrandWCPayRequest', {\r\n\t\t\t\t\t\t\"appId\": appId,\r\n\t\t\t\t\t\t\"timeStamp\": timeStamp,\r\n\t\t\t\t\t\t\"nonceStr\": nonceStr,\r\n\t\t\t\t\t\t\"package\": datapackage,\r\n\t\t\t\t\t\t\"signType\": signType,\r\n\t\t\t\t\t\t\"paySign\": paySign\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction(res) {\r\n\t\t\t\t\t\tif(res.err_msg == \"get_brand_wcpay_request:ok\") {\r\n              alert('充值成功');\r\n\t\t\t\t\t\t\t//gotoSuccessPage();\r\n\t\t\t\t\t\t\t//wx.closeWindow();\r\n\t\t\t\t\t\t} else if(res.err_msg == \"get_brand_wcpay_request:cancel\") {\r\n\t\t\t\t\t\t\tconsole.log(\"用户取消支付!\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.log(\"支付失败!\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t}\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style>\r\n  .el-dialog{\r\n    text-align: center\r\n  }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/page/recharge.vue?8ebc9b9a","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@2.0.0@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.0.4@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-55fed368\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.0.4@vue-loader/lib/selector?type=styles&index=0!./recharge.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.0.4@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.0.4@vue-loader/lib/selector?type=script&index=0!./recharge.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.0.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-55fed368\\\",\\\"hasScoped\\\":false}!../../../node_modules/_vue-loader@13.0.4@vue-loader/lib/selector?type=template&index=0!./recharge.vue\"\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/page/recharge.vue\n// module id = jaj3\n// module chunks = 2"],"sourceRoot":""}