webpackJsonp([2],{"+wmR":function(e,t,n){var i=n("Grs1");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n("XkoO")("14970f9b",i,!0)},Az6o:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{xs:22,sm:22,md:22,lg:4,push:1}},[n("el-card",{staticClass:"box-card"},[n("el-form",{ref:"form",attrs:{model:e.form}},[n("el-form-item",{attrs:{label:"充值金额（元）",prop:"merRuleid"}},[n("el-select",{attrs:{filterable:"","allow-create":"",placeholder:"请选择充值金额"},model:{value:e.form.price,callback:function(t){e.form.price=t},expression:"form.price"}},e._l(e.prices,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("充值")]),e._v(" "),n("el-button",[e._v("取消")])],1)],1)],1)],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"微信扫码支付",visible:e.dialogVisible,size:"tiny","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("img",{attrs:{src:e.imgurl}}),e._v(" "),n("span",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)])],1)},r=[],o={render:i,staticRenderFns:r};t.a=o},E4LH:function(e,t,n){"use strict";function i(e){return/^[0-9A-Za-z\u4e00-\u9fa5]+$/.test(e)}function r(e){return/^[\u4e00-\u9fa5]{1}[a-zA-Z]{1}[a-zA-Z_0-9]{5}$/.test(e)}function o(e){return/^[0-9]+$/.test(e)}t.c=i,t.b=r,t.a=o},Grs1:function(e,t,n){t=e.exports=n("acE3")(!0),t.push([e.i,".el-dialog{text-align:center}","",{version:3,sources:["C:/Users/Administrator/WebstormProjects/vueAdmin-template/src/views/page/recharge.vue"],names:[],mappings:"AACA,WACE,iBAAkB,CACnB",file:"recharge.vue",sourcesContent:["\n.el-dialog{\n  text-align: center\n}\n"],sourceRoot:""}])},ULZw:function(e,t,n){"use strict";var i=n("4YfN"),r=n.n(i),o=n("E4LH"),a=n("lQSI");t.a={computed:r()({},n.i(a.b)(["source"])),data:function(){return{imgurl:"123",dialogVisible:!1,prices:[100,200,500,1e3],form:{price:100},rechargeRules:{price:[{required:!0,trigger:"blur",validator:function(e,t,i){n.i(o.a)(t)?i():i(new Error("请输入正确的金额"))}}]}}},methods:{handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$store.dispatch("AddRecharge",e.form.price).then(function(){e.$store.dispatch("PrePay",e.source).then(function(t){2===e.source?(e.imgurl="http://qr.topscan.com/api.php?text="+t.data,e.dialogVisible=!0):e.pay(t.data)}).catch(function(){})}).catch(function(){})})},pay:function(e){function t(e){var t=e,n=t.appId,i=t.timeStamp,r=t.nonceStr,o=t.datapackage,a=t.signType,c=t.paySign;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:n,timeStamp:i,nonceStr:r,package:o,signType:a,paySign:c},function(e){"get_brand_wcpay_request:ok"==e.err_msg?alert("充值成功"):"get_brand_wcpay_request:cancel"==e.err_msg?console.log("用户取消支付!"):console.log("支付失败!")})}"undefined"==typeof WeixinJSBridge?(document.addEventListener?document.addEventListener("WeixinJSBridgeReady",t,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",t),document.attachEvent("onWeixinJSBridgeReady",t)),console.log("初始化失败")):(t(e),console.log("初始化成功"))}}}},jaj3:function(e,t,n){"use strict";function i(e){n("+wmR")}Object.defineProperty(t,"__esModule",{value:!0});var r=n("ULZw"),o=n("Az6o"),a=n("J0+h"),c=i,s=a(r.a,o.a,c,null,null);t.default=s.exports}});
//# sourceMappingURL=2.4c4357f7be59c35eff7f.js.map